<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CIIReady — Pass R01 with spaced repetition</title>
  <meta name="description" content="230 exam-style questions, timed mock exams and spaced repetition. The smarter way to prepare for the CII R01 exam. £19, one-time.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://js.stripe.com/v3/"></script>
  <style>
    :root {
      --bg: #f8f9fb;
      --bg-card: #ffffff;
      --bg-elevated: #f1f3f6;
      --text-primary: #0c1421;
      --text-secondary: #5e6878;
      --text-tertiary: #8d95a3;
      --border: #e4e7ec;
      --accent: #3b6cf5;
      --accent-soft: rgba(59,108,245,0.08);
      --accent-hover: #2b5ae0;
      --success: #12a150;
      --danger: #e5383b;
      --radius: 14px;
      --radius-sm: 8px;
      --shadow: 0 2px 8px rgba(12,20,33,0.06);
      --shadow-lg: 0 8px 24px rgba(12,20,33,0.08);
      --font: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
      --mono: 'JetBrains Mono', monospace;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      background: var(--bg);
      font-family: var(--font);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
    }

    /* NAV */
    .nav {
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 24px; height: 56px;
      background: var(--bg-card);
      border-bottom: 1px solid var(--border);
    }
    .nav-logo {
      display: flex; align-items: center; gap: 8px;
      text-decoration: none; color: var(--text-primary);
    }
    .nav-mark {
      width: 28px; height: 28px; border-radius: 8px;
      background: var(--accent);
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; font-size: 13px; color: #fff;
    }
    .nav-text { font-weight: 600; font-size: 16px; letter-spacing: -0.02em; }
    .nav-badge {
      font-family: var(--mono); font-size: 10px; font-weight: 500;
      color: var(--text-tertiary); background: var(--bg-elevated);
      padding: 2px 7px; border-radius: 4px;
    }

    /* MAIN */
    .main {
      max-width: 720px; margin: 0 auto;
      padding: 48px 24px 80px;
    }

    /* HERO */
    .hero-tag {
      font-family: var(--mono); font-size: 11px; font-weight: 600;
      color: var(--accent); background: var(--accent-soft);
      padding: 4px 12px; border-radius: 20px;
      display: inline-block; margin-bottom: 20px;
      letter-spacing: 0.04em;
    }
    .hero-title {
      font-size: 40px; font-weight: 700; line-height: 1.1;
      letter-spacing: -0.03em; margin-bottom: 16px;
    }
    .hero-title em { font-style: normal; color: var(--accent); }
    .hero-sub {
      font-size: 17px; color: var(--text-secondary);
      line-height: 1.65; margin-bottom: 40px; max-width: 540px;
    }

    /* FEATURES */
    .features {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 12px; margin-bottom: 48px;
    }
    .feature {
      background: var(--bg-card); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 20px;
    }
    .feature-num {
      font-family: var(--mono); font-size: 10px; font-weight: 700;
      color: var(--accent); margin-bottom: 8px;
    }
    .feature-title { font-size: 15px; font-weight: 600; margin-bottom: 4px; }
    .feature-desc { font-size: 13px; color: var(--text-tertiary); line-height: 1.55; }

    /* HOW IT WORKS */
    .method {
      background: var(--bg-card); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 28px;
      margin-bottom: 48px;
    }
    .method-title { font-size: 18px; font-weight: 600; margin-bottom: 6px; }
    .method-text { font-size: 14px; color: var(--text-secondary); line-height: 1.7; margin-bottom: 20px; }
    .method-steps {
      display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;
    }
    .method-step {
      background: var(--bg-elevated); border-radius: var(--radius-sm);
      padding: 14px 16px;
    }
    .method-step-n {
      font-family: var(--mono); font-size: 10px; font-weight: 700;
      color: var(--accent); margin-bottom: 4px;
    }
    .method-step-t { font-size: 13px; font-weight: 600; margin-bottom: 2px; }
    .method-step-d { font-size: 11px; color: var(--text-tertiary); line-height: 1.45; }

    /* PAYMENT SECTION */
    .pay-section {
      display: grid; grid-template-columns: 1fr 1fr;
      gap: 32px; align-items: start;
      margin-bottom: 48px;
    }

    .pay-info {}
    .pay-price {
      font-size: 48px; font-weight: 700; letter-spacing: -0.03em;
      line-height: 1; margin-bottom: 4px;
    }
    .pay-once {
      font-size: 14px; color: var(--text-tertiary); margin-bottom: 20px;
    }
    .pay-includes { list-style: none; }
    .pay-includes li {
      font-size: 14px; color: var(--text-secondary); line-height: 1.6;
      padding-left: 20px; position: relative; margin-bottom: 6px;
    }
    .pay-includes li::before {
      content: '✓'; position: absolute; left: 0;
      color: var(--success); font-weight: 700; font-size: 13px;
    }

    .pay-form {
      background: var(--bg-card); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 28px;
      box-shadow: var(--shadow);
    }
    .pay-form-title {
      font-size: 16px; font-weight: 600; margin-bottom: 20px;
    }

    .field { margin-bottom: 16px; }
    .field label {
      display: block; font-size: 13px; font-weight: 500;
      color: var(--text-secondary); margin-bottom: 6px;
    }
    .field input {
      width: 100%; padding: 10px 14px; border: 1px solid var(--border);
      border-radius: var(--radius-sm); font-family: var(--font);
      font-size: 14px; color: var(--text-primary); background: var(--bg);
      outline: none; transition: border-color 0.15s;
    }
    .field input:focus { border-color: var(--accent); }

    #card-element {
      padding: 12px 14px; border: 1px solid var(--border);
      border-radius: var(--radius-sm); background: var(--bg);
      transition: border-color 0.15s;
    }
    #card-element.StripeElement--focus { border-color: var(--accent); }

    .pay-btn {
      width: 100%; padding: 14px; border: none;
      background: var(--accent); color: #fff;
      font-family: var(--font); font-size: 15px; font-weight: 600;
      border-radius: 10px; cursor: pointer;
      transition: background 0.15s, transform 0.15s;
      margin-top: 20px;
    }
    .pay-btn:hover { background: var(--accent-hover); transform: translateY(-1px); }
    .pay-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

    .pay-error {
      color: var(--danger); font-size: 13px; margin-top: 12px;
      display: none;
    }
    .pay-error.visible { display: block; }

    .pay-secure {
      font-size: 11px; color: var(--text-tertiary); text-align: center;
      margin-top: 14px;
    }

    /* SUCCESS STATE */
    .success-box {
      background: var(--bg-card); border: 1px solid var(--border);
      border-radius: var(--radius); padding: 40px 32px;
      text-align: center; max-width: 480px; margin: 0 auto;
      box-shadow: var(--shadow);
      display: none;
    }
    .success-box.visible { display: block; }
    .success-icon {
      width: 48px; height: 48px; border-radius: 50%;
      background: rgba(18,161,80,0.1);
      display: inline-flex; align-items: center; justify-content: center;
      font-size: 22px; margin-bottom: 16px;
    }
    .success-title { font-size: 22px; font-weight: 600; margin-bottom: 6px; }
    .success-text {
      font-size: 14px; color: var(--text-secondary); line-height: 1.65;
      margin-bottom: 24px;
    }
    .success-btn {
      display: inline-block; background: var(--accent); color: #fff;
      padding: 12px 28px; border-radius: 10px; text-decoration: none;
      font-weight: 600; font-size: 14px; transition: background 0.15s;
    }
    .success-btn:hover { background: var(--accent-hover); }

    /* FOOTER */
    .footer {
      max-width: 720px; margin: 0 auto; padding: 0 24px 48px;
    }
    .footer-text {
      font-size: 11px; color: var(--text-tertiary); line-height: 1.6;
      padding-top: 20px; border-top: 1px solid var(--border);
    }

    /* RESPONSIVE */
    @media (max-width: 680px) {
      .hero-title { font-size: 30px; }
      .hero-sub { font-size: 15px; }
      .features { grid-template-columns: 1fr; }
      .method-steps { grid-template-columns: repeat(2, 1fr); }
      .pay-section { grid-template-columns: 1fr; }
      .pay-price { font-size: 40px; }
      .main { padding: 32px 16px 60px; }
    }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="nav">
    <a href="/" class="nav-logo">
      <span class="nav-mark">CR</span>
      <span class="nav-text">CIIReady</span>
      <span class="nav-badge">R01</span>
    </a>
  </nav>

  <!-- MAIN -->
  <div class="main" id="main-content">

    <!-- HERO -->
    <div class="hero-tag">CII R01 · Financial Services, Regulation & Ethics</div>
    <h1 class="hero-title">
      Pass R01 with<br><em>spaced repetition</em>
    </h1>
    <p class="hero-sub">
      230 exam-style questions across all 10 modules, two timed mock exams, and an algorithm that learns what you know — and what you don't. Built for people who'd rather study smart than study long.
    </p>

    <!-- FEATURES -->
    <div class="features">
      <div class="feature">
        <div class="feature-num">230</div>
        <div class="feature-title">Original questions</div>
        <div class="feature-desc">Independently authored. Covering every R01 module with detailed explanations.</div>
      </div>
      <div class="feature">
        <div class="feature-num">2</div>
        <div class="feature-title">Timed mock exams</div>
        <div class="feature-desc">50 questions, 60 minutes, 65% pass mark. Real exam conditions.</div>
      </div>
      <div class="feature">
        <div class="feature-num">15</div>
        <div class="feature-title">Minutes a day</div>
        <div class="feature-desc">The app tells you exactly what to study today. No planning, no overwhelm.</div>
      </div>
    </div>

    <!-- METHOD -->
    <div class="method">
      <div class="method-title">The method behind it</div>
      <div class="method-text">
        Spaced repetition is the same evidence-based technique used by medical students, pilots and language learners. You review material at scientifically optimised intervals — just as you're about to forget it. The result: stronger recall with less total study time.
      </div>
      <div class="method-steps">
        <div class="method-step">
          <div class="method-step-n">01</div>
          <div class="method-step-t">Answer</div>
          <div class="method-step-d">Work through R01 questions at your own pace</div>
        </div>
        <div class="method-step">
          <div class="method-step-n">02</div>
          <div class="method-step-t">Review</div>
          <div class="method-step-d">Right? Comes back later. Wrong? Tomorrow.</div>
        </div>
        <div class="method-step">
          <div class="method-step-n">03</div>
          <div class="method-step-t">Space</div>
          <div class="method-step-d">Intervals grow: 1→3→7→14→30→60 days</div>
        </div>
        <div class="method-step">
          <div class="method-step-n">04</div>
          <div class="method-step-t">Master</div>
          <div class="method-step-d">Five correct reviews = locked in long-term memory</div>
        </div>
      </div>
    </div>

    <!-- PAYMENT -->
    <div class="pay-section" id="pay-section">
      <div class="pay-info">
        <div class="pay-price">£19</div>
        <div class="pay-once">One-time payment · Lifetime access</div>
        <ul class="pay-includes">
          <li>230 exam-style questions with explanations</li>
          <li>All 10 R01 modules covered</li>
          <li>Two full timed mock exams</li>
          <li>Spaced repetition scheduling</li>
          <li>Progress tracking across sessions</li>
          <li>Works on any device — phone, tablet, desktop</li>
          <li>Access link emailed instantly</li>
        </ul>
      </div>

      <div class="pay-form" id="pay-form">
        <div class="pay-form-title">Get instant access</div>

        <div class="field">
          <label for="name">Full name</label>
          <input type="text" id="name" placeholder="e.g. Sarah Mitchell" autocomplete="name" required>
        </div>

        <div class="field">
          <label for="email">Email address</label>
          <input type="email" id="email" placeholder="e.g. sarah@example.com" autocomplete="email" required>
        </div>

        <div class="field">
          <label>Card details</label>
          <div id="card-element"></div>
        </div>

        <button class="pay-btn" id="pay-btn" type="button">Pay £19 →</button>

        <div class="pay-error" id="pay-error"></div>

        <div class="pay-secure">
          Secured by Stripe · Card details never touch our servers
        </div>
      </div>
    </div>

    <!-- SUCCESS (hidden until payment completes) -->
    <div class="success-box" id="success-box">
      <div class="success-icon">✓</div>
      <div class="success-title">You're in.</div>
      <div class="success-text">
        Check your email — we've sent your personal access link.<br>
        Bookmark it and you can use it on any device, any time.
      </div>
      <a class="success-btn" id="success-link" href="#">Open CIIReady →</a>
    </div>

  </div>

  <!-- FOOTER -->
  <div class="footer">
    <div class="footer-text">
      CIIReady is an independent revision tool. It is not affiliated with, endorsed by, or derived from CII examination materials. All questions are independently authored and test publicly available regulatory knowledge from the FCA Handbook, UK legislation, and published regulatory guidance.
      <br><br>
      © 2026 CIIReady · Questions? <a href="mailto:hello@ciiready.com" style="color: var(--accent); text-decoration: none;">hello@ciiready.com</a>
    </div>
  </div>

  <script>
    // ═══════════════════════════════════════════════════════════════
    // CONFIG — update these two values before going live
    // ═══════════════════════════════════════════════════════════════
    const STRIPE_KEY = 'pk_test_51T4e5cFeTK7URcjC3mD0VlelRX59ZsEO7XAYS7Ujgpb8dT0NjlJQZngyzaiYvBkbPzlIgHNvQ40CArCgK2jODj8h003CmZWOTw';       // Your Stripe publishable key
    const API_BASE   = 'https://ciiready-app.vercel.app/'; // Your Vercel API URL (no trailing /)

    // ═══════════════════════════════════════════════════════════════
    // STRIPE SETUP
    // ═══════════════════════════════════════════════════════════════
    const stripe = Stripe(STRIPE_KEY);
    const elements = stripe.elements({
      fonts: [{ cssSrc: 'https://fonts.googleapis.com/css2?family=Outfit:wght@400;500&display=swap' }],
    });

    const cardElement = elements.create('card', {
      style: {
        base: {
          fontFamily: "'Outfit', sans-serif",
          fontSize: '14px',
          color: '#0c1421',
          '::placeholder': { color: '#8d95a3' },
        },
        invalid: { color: '#e5383b' },
      },
      hidePostalCode: true,
    });
    cardElement.mount('#card-element');

    // ═══════════════════════════════════════════════════════════════
    // PAYMENT FLOW
    // ═══════════════════════════════════════════════════════════════
    const payBtn     = document.getElementById('pay-btn');
    const payError   = document.getElementById('pay-error');
    const paySection = document.getElementById('pay-section');
    const payForm    = document.getElementById('pay-form');
    const successBox = document.getElementById('success-box');
    const successLink= document.getElementById('success-link');

    function showError(msg) {
      payError.textContent = msg;
      payError.classList.add('visible');
    }
    function clearError() {
      payError.textContent = '';
      payError.classList.remove('visible');
    }

    payBtn.addEventListener('click', async () => {
      clearError();

      const name  = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();

      if (!name) return showError('Please enter your name.');
      if (!email || !email.includes('@')) return showError('Please enter a valid email address.');

      payBtn.disabled = true;
      payBtn.textContent = 'Processing…';

      try {
        // 1. Create PaymentIntent
        const intentRes = await fetch(API_BASE + '/api/create-payment-intent', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, name, product: 'ciiready-r01' }),
        });

        if (!intentRes.ok) {
          const err = await intentRes.json().catch(() => ({}));
          throw new Error(err.error || 'Could not create payment. Please try again.');
        }

        const { clientSecret } = await intentRes.json();

        // 2. Confirm card payment
        const { error, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
          payment_method: {
            card: cardElement,
            billing_details: { name, email },
          },
        });

        if (error) {
          throw new Error(error.message);
        }

        if (paymentIntent.status !== 'succeeded') {
          throw new Error('Payment was not completed. Please try again.');
        }

        // 3. Notify our backend (generates token, sends email, logs purchase)
        const successRes = await fetch(API_BASE + '/api/payment-success', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            paymentIntentId: paymentIntent.id,
            email,
            name,
            product: 'ciiready-r01',
          }),
        });

        const successData = await successRes.json();

        if (!successRes.ok) {
          // Payment succeeded but email/logging failed — still show success
          // but tell them to check email or contact support
          showSuccess(null);
          return;
        }

        showSuccess(successData.accessToken);

      } catch (err) {
        showError(err.message);
        payBtn.disabled = false;
        payBtn.textContent = 'Pay £19 →';
      }
    });

    function showSuccess(token) {
      paySection.style.display = 'none';
      successBox.classList.add('visible');

      if (token) {
        const appUrl = 'https://app.ciiready.com?token=' + token;
        successLink.href = appUrl;
      } else {
        successLink.style.display = 'none';
        document.querySelector('.success-text').innerHTML =
          'Payment confirmed. Check your email for your personal access link.<br>' +
          'If it doesn\'t arrive in a few minutes, contact <a href="mailto:hello@ciiready.com" style="color: var(--accent);">hello@ciiready.com</a>';
      }

      // Scroll to success box
      successBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  </script>

</body>
</html>
